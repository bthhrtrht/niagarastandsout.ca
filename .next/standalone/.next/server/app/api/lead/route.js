"use strict";(()=>{var e={};e.id=558,e.ids=[558],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},8803:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>S,requestAsyncStorage:()=>x,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{POST:()=>m});var a=r(9303),o=r(8716),n=r(670),i=r(2048),p=r.n(i),u=r(5315),c=r.n(u),d=r(4770),l=r(7070);async function m(e){try{let{name:t,email:r,slug:s,message:a}=await e.json();if(!t||!r||!s||!a)return l.NextResponse.json({error:"Missing fields"},{status:400});let o=c().resolve(process.cwd(),"data","leads.json"),n=JSON.parse(p().readFileSync(o,"utf-8")||"[]");n.push({name:t,email:r,slug:s,message:a,timestamp:new Date().toISOString()}),p().writeFileSync(o,JSON.stringify(n,null,2));try{let e=process.env.GA_MEASUREMENT_ID,a=process.env.GA_API_SECRET;if(e&&a){let o=(0,d.randomUUID)();await fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${e}&api_secret=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,events:[{name:"lead_capture",params:{slug:s,name:t,email:r}}]})})}}catch{}return l.NextResponse.json({success:!0})}catch(e){return l.NextResponse.json({error:e.message},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/lead/route",pathname:"/api/lead",filename:"route",bundlePath:"app/api/lead/route"},resolvedPagePath:"/Users/thomasjacques/Desktop/SITEFIXED/shopify-headless-complete/app/api/lead/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:f,serverHooks:g}=h,y="/api/lead/route";function S(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(8803));module.exports=s})();