"use strict";(()=>{var e={};e.id=635,e.ids=[635],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},4287:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>v,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{POST:()=>m});var a=r(9303),n=r(8716),o=r(670),i=r(2048),p=r.n(i),u=r(5315),c=r.n(u),d=r(4770),l=r(7070);async function m(e){try{let{slug:t,variant:r,eventType:s}=await e.json();if(!t||!r||!s)return l.NextResponse.json({error:"Missing fields"},{status:400});let a=c().resolve(process.cwd(),"data","ab-events.json"),n=JSON.parse(p().readFileSync(a,"utf-8")||"[]");n.push({slug:t,variant:r,eventType:s,timestamp:new Date().toISOString()}),p().writeFileSync(a,JSON.stringify(n,null,2));try{let e=process.env.GA_MEASUREMENT_ID,a=process.env.GA_API_SECRET;if(e&&a){let n=(0,d.randomUUID)();await fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${e}&api_secret=${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,events:[{name:"ab_event",params:{slug:t,variant:r,eventType:s}}]})})}}catch{}return l.NextResponse.json({success:!0})}catch(e){return l.NextResponse.json({error:e.message},{status:500})}}let v=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/ab-event/route",pathname:"/api/ab-event",filename:"route",bundlePath:"app/api/ab-event/route"},resolvedPagePath:"/Users/thomasjacques/Desktop/SITEFIXED/shopify-headless-complete/app/api/ab-event/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:f}=v,g="/api/ab-event/route";function y(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(4287));module.exports=s})();